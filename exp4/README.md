# 实验四

## 一．实验目的及要求

1. 了解线性规划的基本内容；
2. 掌握用数学软件包（Matlab、Lingo、Python）求解线性规划问题。


## 二. 实验内容

某厂生产甲乙两种口味的饮料，具体信息如下：

| 饮料种类 | 每百箱需用原料 (千克) | 每百箱需要工人 (名) | 每百箱可获利 (万元) |
|:---:|:---:|:---:|:---:|
| 甲 | 6 | 10 | 10 |
| 乙 | 5 | 20 | 9 |

工厂现有资源限制：

| 资源种类 | 总量   |
|:---:|:---:|
| 原料     | 60 千克 |
| 工人     | 150 名  |

附加限制为甲饮料产量不超过 8 百箱。

### 问题一

如何安排生产计划（即两种饮料各生产多少），使得获利最大？

### 问题二

若投资 0.8 万元可增加原料 1 千克，问应否作这项投资？

### 问题三

若每百箱甲饮料获利可增加 1 万元，问应否改变生产计划？

# 模型准备

## 模型假设

1. 工人约束是指某种工时而非工人本身。
2. 

### 的的

## 问题一的建立与求解


### 模型的建立

在该生产问题的数学建模中，我们定义决策变量：

- $x$：甲饮料的生产量（单位：百箱）
- $y$：乙饮料的生产量（单位：百箱）

根据资源限制建立约束条件：

1. **原料约束**：每百箱甲饮料需6千克原料，乙饮料需5千克，总量60千克
   $$6x + 5y \leqslant 60$$

2. **工人约束**：每百箱甲饮料需10名工人，乙饮料需20名，总数150名
   $$10x + 20y \leqslant 150$$

3. **产量限制**：甲饮料不超过8百箱
   $$x \leqslant 8$$

4. **非负约束**：产量不能为负
   $$x \geqslant 0, y \geqslant 0$$

5. **整数约束**（可选）：生产数量按百箱计算
   $$x,y \in \mathbb{Z}\ (\text{Optional})$$

每百箱甲饮料获利10万元，乙饮料获利9万元，记总利润为$z$，目标函数为利润最大化：
$$\max z = 10x + 9y$$

综上，该问题可表示为以下线性规划模型：

$$
\begin{aligned}
&\max z = 10x + 9y\\
&\text{s.t.}
\left\{
\begin{array}{l}
6x + 5y \leqslant 60\\
10x + 20y \leqslant 150\\
x \leqslant 8\\
x, y \geqslant 0\\
x, y \in \mathbb{Z}\ (\text{Optional})
\end{array}
\right.
\end{aligned}
$$

### 模型的求解

存在整数约束时，该模型是整数线性规划问题，可以用分支定界法求解；忽略该约束时，是连续性规划问题，可通过单纯形法或图解法求解。通过求解该模型，可以确定甲、乙两种饮料的最优生产方案，实现企业利润最大化的目标。

编写Python程序求解后，均求得最优解。

| 指标                    | 连续规划   | 整数规划 | 差额      |
| ----------------------- | ---------- | -------- | --------- |
| 甲饮料产量（$x$，百箱） | $6.4286$   | $8$      | $-1.5714$ |
| 乙饮料产量（$y$，百箱） | $4.2857$   | $2$      | $2.2857$  |
| 最大利润（$z$，万元）   | $102.8571$ | $98$     | $4.8571$  |
| 原料使用（千克）        | $60/60 \; (100\%)$ | $58/60 \; (96.7\%)$ | $-$ |
| 工人使用（人）          | $150/150 \; (100\%)$ | $120/150 \; (80\%)$ | $-$ |


在实际生产过程中，只能生产整数箱产品，所以采取整数规划的结果。

### 模型的优化及求解

通过对比可以发现，连续规划的理论最大利润比整数规划高出 $4.86$ 万元。但由于连续规划结果小数位数大于两位，即存在不足一箱的产量数字，不符合生产实际。

对于这一问题，我们将单位从百箱换为箱并添加整数约束，这样得到的结果会更接近连续规划。

得到以下模型：

$$
\begin{aligned}
&\max z = 0.1x + 0.09y\\
&\text{s.t.}
\left\{
\begin{array}{l}
0.06x + 0.05y \leqslant 60\\
0.1x + 0.2y \leqslant 150\\
x \leqslant 800\\
x, y \geqslant 0\\
x, y \in \mathbb{Z}
\end{array}
\right.
\end{aligned}
$$



上述模型的求解结果为

| 指标                    | 百箱为单位 | 箱为单位 | 差额      |
| ----------------------- | ---------- | ------------- | --------- |
| 甲饮料产量（箱）        | $800$      | $645$         | $-155$    |
| 乙饮料产量（箱）        | $200$      | $426$         | $+226$    |
| 最大利润（$z$，万元）   | $98.00$    | $102.8400$    | $+4.84$   |
| 原料使用（千克）        | $58/60 \\ (96.7\%)$ | $60.00/60 \\ (100\%)$ | $+2.00$ |
| 工人使用（人）          | $120/150 \\ (80\%)$ | $149.70/150 \\ (99.8\%)$ | $+29.70$ |

（由于假设1，工人可以出现非整数数量）

由验证结果可以看出，原料和工人资源几乎被完全利用，这说明优化方案充分利用了现有资源。相比于百箱为单位的整数规划方案，此方案利润提高了 $4.84$ 万元。

### 结论

通过线性规划建模对饮料生产计划进行优化后得出以下结论。

**在原始整数规划方案中，甲饮料生产量为 $8$ 百箱（$800$ 箱），乙饮料为 $2$ 百箱（$200$ 箱），实现最大利润 $98$ 万元**。此时资源消耗情况为原料使用率 $96.7\%$，人工利用率为 $80\%$。

**经单位细化优化后，甲饮料生产量调整为 $645$ 箱，乙饮料 $426$ 箱，最大利润提升至 $102.84$ 万元**。此时原料利用率 $100\%$, 人工利用率 $99.8\%$。



